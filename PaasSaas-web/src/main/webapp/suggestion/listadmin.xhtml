<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/_MyTemplatepage.xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
	<ui:param name="page_name" value="Accueil" />
	<ui:define name="test">
		<h:panelGroup>
			<h:form>

<h:panelGrid columns="3" cellpadding="5"
				style=" position: relative;
  top: 40px;
  left: 400px;">
				<h:outputText value="Average:" style="color:black" />
				<br />


				<p:rating value="#{ratingView.getAll()}" readonly="true" />
			</h:panelGrid>
				<h:head>
					<link href="Template/lib/bootstrap/css/bootstrap.min.css"
						rel="stylesheet" />
					<script type="text/javascript"
						src="https://code.jquery.com/jquery-3.1.1.min.js" />
					<script src="Template/lib/jquery/jquery.min.js"></script>
					<script src="Template/lib/bootstrap/js/bootstrap.min.js"></script>
					<link href="/Content/font-awesome.css" rel="stylesheet"
						type="text/css" />
					<link href="/Content/font-awesome.min.css" rel="stylesheet"
						type="text/css" />

				</h:head>
				<br/>
				<div class="panel panel-default">
					<div class="panel-heading">
						<input placeholder="search" type="text" name="search" id="search" />
					</div>
					
        
					
					<div class="panel-body" id="contenu">
						<c:forEach items="#{suggestion.getAll()}" var="item">
							<c:if test="#{item.get('priorite') == 0}">
								<div class="panel panel-danger" id="${item.get('titre')}">
									<div class="panel-heading" id="${item.get('titre')}">
										Titre:
										<h:outputText value="${item.get('titre')}" />
										<br />
									</div>
									<div class="panel-body" id="${item.get('titre')}">
										Description:
										<h:outputText value="${item.get('description')}" />
										<br />
									</div>
									<div style="overflow: hidden;" class="panel-footer"
										id="${item.get('titre')}">
										Auteur :
										<h:outputText value="${item.get('auteur')}" />
										<c:if test="#{item.get('etats') == 1}">
										<h:commandButton  class="btn btn-danger" action="#{suggestion.etat(item.get('Idsug'))}"
									value="Validé" style="float:right" />
										</c:if> 
										<c:if test="#{item.get('etats') == 0}">
										<h:outputLabel style="float:right;margin-top:8px">deja validé</h:outputLabel>
											
										</c:if>
									
									 
										<h:commandButton style="float:right" class="btn btn-primary"
											value="Vote (${item.get('nbvote')})"
											action="#{suggestion.Vote(item.get('Idsug'))}" />
									</div>
								</div>
 		</c:if>
							<c:if test="#{item.get('priorite') == 1}">
								<div class="panel panel-success" id="${item.get('titre')}">
									<div class="panel-heading" id="${item.get('titre')}">
										Titre:
										<h:outputText value="${item.get('titre')}" />
										<br />
									</div>
									<div class="panel-body" id="${item.get('titre')}">
										Description:
										<h:outputText value="${item.get('description')}" />
										<br />
									</div>
									<div style="overflow: hidden;" class="panel-footer"
										id="${item.get('titre')}">
										Auteur :
										<h:outputText value="${item.get('auteur')}" />
										<c:if test="#{item.get('etats') == 1}">
										<h:commandButton  class="btn btn-danger" action="#{suggestion.etat(item.get('Idsug'))}"
									value="Validé" style="float:right" />
										</c:if> 
										<c:if test="#{item.get('etats') == 0}">
										<h:outputLabel style="float:right;margin-top:8px">deja validé</h:outputLabel>
											
										</c:if> 
										<h:commandButton style="float:right" class="btn btn-primary"
											value="Vote (${item.get('nbvote')})"
											action="#{suggestion.Vote(item.get('Idsug'))}" />
									</div>
								</div>
 		</c:if>
							<c:if test="#{item.get('priorite') == 2}">
								<div class="panel panel-warning" id="${item.get('titre')}">
									<div class="panel-heading" id="${item.get('titre')}">
										Titre:
										<h:outputText value="${item.get('titre')}" />
										<br />
									</div>
									<div class="panel-body" id="${item.get('titre')}">
										Description:
										<h:outputText value="${item.get('description')}" />
										<br />
									</div>
									<div style="overflow: hidden;" class="panel-footer"
										id="${item.get('titre')}">
										Auteur :
										<h:outputText value="${item.get('auteur')}" />
										<c:if test="#{item.get('etats') == 1}">
										<h:commandButton  class="btn btn-danger" action="#{suggestion.etat(item.get('Idsug'))}"
									value="Validé" style="float:right" />
										</c:if> 
										<c:if test="#{item.get('etats') == 0}">
										<h:outputLabel style="float:right;margin-top:8px">deja validé</h:outputLabel>
											
										</c:if>



										<h:commandButton style="float:right" class="btn btn-primary"
											value="Vote (${item.get('nbvote')})"
											action="#{suggestion.Vote(item.get('Idsug'))}" />

									</div>
								</div>
 		</c:if>
						</c:forEach>


					</div>

				</div>
				<script>
//function recherche(entree){
  //maRegExp = new RegExp(entree.value); // expression régulière en fonction de l'entrée
//  divs = document.getElementById("contenu").getElementsByTagName("div"); // toutes les div en dessous de #contenu

  //for(i=0;i &lt;divs.length;  i++){ 
	  // parcours de toutes ces div
    //if(maRegExp.test(divs[i].id)){ // test de la regexp
      //divs[i].style.display = "block"; // afficher    
     // }
   // else{
     // divs[i].style.display = "none"; // cacher
   // }
 // }
//}
defaut = $('#contenu').html();
$(document).ready( function() {
  // détection de la saisie dans le champ de recherche
  $('#search').keyup( function(){
    $field = $(this);
 
    if( $field.val().length >= 1 )
    {
	// le traitement de la recherche que je ne trouve pas

		var maRegExp = new RegExp($('#search').val()); // expression régulière en fonction de l'entrée
		var divs = $('div#contenu div'); // toutes les div en dessous de #contenu
		
		for(i=0;i &lt;divs.size();i++)
		{
			if(maRegExp.test(divs[i].id))
			{ // test de la regexp
				divs[i].style.display = "block"; // afficher    
			}
			else
			{
				divs[i].style.display = "none"; // cacher
			}
		}
         
    }

    else
    {
	$('#contenu').html(defaut); // defaut est une variable contenant mon code à la base, càd toutes les div
    }
  });
});
</script>
			</h:form>
		</h:panelGroup>
	</ui:define>
</ui:composition>